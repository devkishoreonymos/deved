<!DOCTYPE html>
<html style="height: auto; min-height: 100%;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Dashboard | Questionaire App </title>

    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    <link rel="icon" href="https://retale.co.in/crm/assets//img/favicon.png">

    <!-- Google Font -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/css">

    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/font-awesome.min.css">

    <!-- Ionicons -->
    <link rel="stylesheet" href="./Dashboard _ Questionairegg App_files/ionicons.min.css">

    <!-- DataTables -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/dataTables.bootstrap.min.css">

    <!-- Select2 -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/select2.min.css">

    <!-- daterange picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/daterangepicker.css">

    <!-- bootstrap datepicker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.css">


    <!-- Morris chart -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/morris.css">
    <!-- jvectormap -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/jquery-jvectormap.css">
    <!-- Date Picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/daterangepicker.css">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap3-wysihtml5.min.css">

    <!-- Uncomment the below code if you want to use official AdminLte Theme -->
    <!-- Theme style -->
    <!-- <link rel="stylesheet" href="https://retale.co.in/crm/assets//css/AdminLTE.min.css"> -->

    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="../Dashboard _ Questionaire App_files/all.css">

    <!-- Theme style -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/app.css">

    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/_all-skins.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

    <!-- jQuery 3 -->
    <script src="./Dashboard _ Questionaire App_files/jquery.min.js.download"></script>


    <!-- jQuery UI 1.11.4 -->
    <script src="./Dashboard _ Questionaire App_files/jquery-ui.min.js.download"></script>

    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>

    <!-- Bootstrap 3.3.7 -->
    <script src="../Dashboard _ Questionaire App_files/bootstrap.min.js.download"></script>

    <!-- SlimScroll -->
    <script src="../Dashboard _ Questionaire App_files/jquery.slimscroll.min.js.download"></script>

    <!-- FastClick -->
    <script src="./Dashboard _ Questionaire App_files/fastclick.js.download"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <script src="./appScripts/Dashboard.js"></script> -->
    <style>
        .img-avtar {
            border-radius: 50%;
        }

        .approve_reject_accept {
            display: none;
        }
    </style>


    <link href="./css/ques.css" rel="stylesheet" />
</head>

<body class="skin-custom sidebar-mini  pace-done" style="height: auto; min-height: 100%;">
    <div class="pace  pace-inactive">
        <div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
            <div class="pace-progress-inner"></div>
        </div>
        <div class="pace-activity"></div>
    </div>
    <!-- Site wrapper -->
    <div class="wrapper" style="height: auto; min-height: 100%;">

        <header class="main-header">
            <!-- Logo -->
            <a href="#" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini">
                    <img src="./Dashboard _ Questionaire App_files/denave_logo.jpg" width="50">
                </span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg">
                    <img src="./Dashboard _ Questionaire App_files/denave_logo.jpg" width="150">
                </span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="https://retale.co.in/crm/operator/dashboard#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- Messages: style can be found in dropdown.less-->
                        <!-- User Account: style can be found in dropdown.less -->
                        <li class="dropdown user user-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="./Dashboard _ Questionaire App_files/3.png" class="user-image" alt="User Image">
                                <span class="hidden-xs user_role">deo</span>
                            </a>
                            <ul class="dropdown-menu">
                                <!-- User image -->
                                <li class="user-header">
                                    <img src="./Dashboard _ Questionaire App_files/3.png" class="img-circle" alt="User Image">

                                    <p>
                                        <span class="hidden-xs user_role">deo</span>
                                        <small>Member since July. 2018</small>
                                    </p>
                                </li>
                                <!-- Menu Footer-->
                                <li class="user-footer">
                                    <div class="pull-left">
                                        <a href="https://retale.co.in/crm/profile" class="btn btn-default btn-flat">Profile</a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="https://retale.co.in/crm/logout" class="btn btn-default btn-flat">Sign out</a>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <!-- Control Sidebar Toggle Button -->
                    </ul>
                </div>
            </nav>
        </header>

        <!-- =============================================== -->

        <!-- Left side column. contains the sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar" style="height: auto;">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="./Dashboard _ Questionaire App_files/3.png" class="img-circle" alt="User Image" style="height:  45px !important;">
                    </div>
                    <div class="pull-left info">
                        <p>
                            <span class="hidden-xs user_role">deo</span>
                        </p>
                        <a href="https://retale.co.in/crm/operator/dashboard#">
                            <i class="fa fa-circle text-success"></i> Online</a>
                    </div>
                </div>

                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu tree" data-widget="tree">

                    <li class="header">Main Navigation</li>

                    <li>
                        <a href="#">
                            <i class="fa fa-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>

                    <li class="active">
                        <a href="./CheckRequest.html">
                            <i class="fa fa-list-ul"></i>
                            <span>Form Entries</span>
                        </a>
                    </li>

                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>

        <!-- =============================================== -->

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper" style="min-height: 629px;">


            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    Form Summary
                </h1>
            </section>

            <!-- Main content -->
            <section class="content">

                <div class="row">
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-aqua">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Total Filled</span>
                                <span class="info-box-number total_filled">0</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-green">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Validated</span>
                                <span class="info-box-number total_validated">15</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-red">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Rejected</span>
                                <span class="info-box-number total_rejected">0</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-red">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Pending</span>
                                <span class="info-box-number total_pending">13</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.col -->

                <div class="box">
                    <div class="box-body">
                        <!-- Page content -->
                        <div id="question_page" class="container" style="max-width:1100px">
                            <form class="denave">
                                <div class="dlivery-section" id="dlivery-section">

                                </div>
                                <div class="Package-condition" id="Package-condition">

                                </div>
                                <div class="product-condition" id="product-condition">

                                </div>
                                <div class="Qcheck" id="Qcheck">

                                </div>
                                <!-- <input type="submit" value="Accept" onClick="validatePreReg(true)"> -->
                                <button id="btnlogin" type="button" class="btn btn-primary edit_btn" onClick="submitForm()">Submit</button>
                                <button id="btnlogin" type="button" class="btn btn-primary show_btn" onClick="submitForm()">Update</button>
                                <button id="btnlogin" type="button" class="btn btn-primary approve_reject_accept" onClick="ApproveRequest()">Approve</button>
                                <button id="btnlogin" type="button" class="btn btn-danger approve_reject_accept" onClick="RejectRequest()">Reject</button>
                            </form>




                        </div>



                        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
                            crossorigin="anonymous"></script>
                        <!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                            crossorigin="anonymous"></script> -->
                        <script>
                            function getStats() {
                                var url = localStorage.getItem('BaseUrl') + 'api/orders/stats';
                                console.log(url);
                                $.ajax({
                                    url: url,
                                    type: "GET",
                                    crossDoman: true,
                                    headers: { "Authorization": localStorage.getItem('token') },
                                    success: function (response) {
                                        $('.total_filled').text(response.total);
                                        $('.total_validated').text(response.accepted);
                                        $('.total_rejected').text(response.rejected);
                                        $('.total_pending').text(response.pending);
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })
                            }
                            getStats();
                            var questions = {
                                deliveryDetails: [
                                    {
                                        name: 'delivery_attempts',
                                        question: 'How many delivery attempts were made ?',
                                        options: ['One', 'Two', 'Three', 'Four', 'More then 4'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: false,
                                        for: 'Q1'
                                    },
                                    {
                                        name: 'delivery_call',
                                        question: 'Have you received delivery call ?',
                                        options: ['Yes', 'No',],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q2'
                                    },
                                    {
                                        name: 'dispatch_mail',
                                        question: 'Have you received dispatch mail of shipment ?',
                                        options: ['Yes', 'No',],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q3'
                                    },
                                    {
                                        name: 'received_mail_after_delivery',
                                        question: 'Have you received mail after delivery attempt ?',
                                        options: ['Yes', 'No',],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q4'
                                    },
                                    {
                                        name: 'you_delayed_the_delivery',
                                        question: 'How have you delayed the delivery of Product? (Reason)',
                                        options: ['Out of Home', 'Concern Person Not Available', 'No Cash At Home', 'N / A',],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q5'
                                    },
                                    {
                                        name: 'communicated_on_Mobile',
                                        question: 'Was it communicated on Mobile through SMS?',
                                        options: ['Yes', 'No',],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q6'
                                    },
                                    {
                                        name: 'communicated_on_Mobile',
                                        question: 'Was the delivery made on date & time mentioned by you?',
                                        options: ['Yes', 'No',],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q7'
                                    },
                                    {
                                        name: 'Communication_against_Delay',
                                        question: 'Communication against Delay in Delivery Communicated via Mail or Call ?',
                                        options: ['Mail', 'Call', 'Both'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q8'
                                    }
                                ],
                                packagingSection: [
                                    {
                                        name: 'overall_packaging_from',
                                        question: 'How was the overall packaging from Amazon/Paytm/Cadbury Gifting?',
                                        options: ['Very Poor', 'Poor', 'Satisfactory', 'Good', 'Very Good'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q9'
                                    },
                                    {
                                        name: 'the_Box_Damaged',
                                        question: 'Was the Box Damaged ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q10'
                                    },
                                    {
                                        name: 'the_Box_Crushed',
                                        question: 'Was the Box Crushed ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q11'
                                    },
                                    {
                                        name: 'Bubble_Wrap_Damaged',
                                        question: 'Was the Bubble Wrap Damaged?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q12'
                                    },
                                    {
                                        name: 'Branded_Box_Only',
                                        question: 'Platform Branded Box Only?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q13'
                                    },
                                    {
                                        name: 'Branded_Tape_Only',
                                        question: 'Platform Branded Tape Only?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q14'
                                    },
                                    {
                                        name: 'Gel_Pads_were_placed',
                                        question: 'How many Gel Pads were placed inside the package?',
                                        options: [],
                                        type: 'number',
                                        remarks: false,
                                        file: true,
                                        for: 'Q15'
                                    },
                                    {
                                        name: 'Gel_Pad_Damaged',
                                        question: 'Was the Gel Pad Damaged & Gel Oozing out ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q16'
                                    },
                                    {
                                        name: 'Mentioned_Make',
                                        question: 'Mentioned Make of Gel Pad ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q17'
                                    },
                                    {
                                        name: 'visible_damage',
                                        question: 'Was there any visible damage on the package you received?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q18'
                                    }
                                ],
                                productConditionSection: [
                                    {
                                        name: 'overall_condition_of_the_Cadbury',
                                        question: 'How was the overall condition of the Cadbury Bar?',
                                        options: ['Very Poor', 'Poor', 'Satisfactory', 'Good', 'Very Good'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q19'
                                    },
                                    {
                                        name: 'physical_change_in_shape',
                                        question: 'Was there any physical change in shape of Cadbury Bar?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q20'
                                    },
                                    {
                                        name: 'visible_change_in_colour',
                                        question: 'Was there any visible change in colour of Cadbury Bar?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q21'
                                    }
                                ],
                                qualityCheckSection: [
                                    {
                                        name: 'Box_Quality',
                                        question: 'Was the Box Quality in Perfect Condition ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q22'
                                    },
                                    {
                                        name: 'Damage_to_Box',
                                        question: 'Was there any Damage to the Box ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q23'
                                    },
                                    {
                                        name: 'Right_Message',
                                        question: `Was there 'Right Message' on the Sleeve ?`,
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q24'
                                    },
                                    {
                                        name: 'Sleeve_Intact',
                                        question: 'Was the Sleeve Intact ?',
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q25'
                                    },
                                    {
                                        name: 'Sleeve_Removed',
                                        question: 'Was the Sleeve Removed / Damaged ?',
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q26'
                                    },
                                    {
                                        name: 'Sleeve_Pasted_with_self',
                                        question: 'Was the Sleeve Pasted with self Adhesive ?',
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q27'
                                    },
                                    {
                                        name: 'Sleeve_Pasted_with_external',
                                        question: 'Was the Sleeve Pasted with some external Adhesive ?',
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q28'
                                    },
                                    {
                                        name: 'Chocolates_Moved',
                                        question: 'Have Chocolates Moved inside the Box ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: true,
                                        for: 'Q29'
                                    },
                                    {
                                        name: 'Shortage_of_Chocolates',
                                        question: 'Any Shortage of Chocolates in the Pack ?',
                                        options: ['Yes', 'No'],
                                        type: 'Radio',
                                        remarks: true,
                                        file: false,
                                        for: 'Q30'
                                    },
                                    {
                                        name: 'Right_Image_on_the_Sleeve',
                                        question: 'Was there Right Image on the Sleeve / Pack ?',
                                        options: ['Yes', 'No', 'NA'],
                                        type: 'Radio',
                                        remarks: false,
                                        file: true,
                                        for: 'Q30'
                                    }
                                ]
                            }

                            var user = JSON.parse(localStorage.getItem('deved_user'));
                            var showBtn = false;
                            $('.user_role').text(user.role);
                            if (user.role == 'validator') {
                                $('.approve_reject_accept').toggle();
                            }
                            var searchParams = new URLSearchParams(window.location.search);
                            var id = searchParams.get('id');
                            var questionaireData = [];
                            if (searchParams.get('edit')) {
                                $('.edit_btn').toggle();
                                if (searchParams.get('edit') == 'false') {
                                    $('.show_btn').toggle();
                                }
                            } else {
                                $('.show_btn').toggle();
                            }
                            if (id) {
                                $.ajax({
                                    url: localStorage.getItem('BaseUrl') + 'api/orders/' + id,
                                    type: "GET",
                                    crossDoman: true,
                                    headers: {
                                        "Authorization": localStorage.getItem('token')
                                    },
                                    success: function (response) {
                                        console.log(response)
                                        questionaireData = response.questionnaire;
                                        createQuestions('dlivery-section', 'deliveryDetails');
                                        createQuestions('Package-condition', 'packagingSection');
                                        createQuestions('product-condition', 'productConditionSection');
                                        createQuestions('Qcheck', 'qualityCheckSection');
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })
                            } else {
                                createQuestions('dlivery-section', 'deliveryDetails');
                                createQuestions('Package-condition', 'packagingSection');
                                createQuestions('product-condition', 'productConditionSection');
                                createQuestions('Qcheck', 'qualityCheckSection');
                            }
                            var oldData = JSON.parse(localStorage.getItem('formData'));
                            if (!oldData) {
                                window.location = "./form_entries_create_update.html";
                            }
                            function createQuestions(secionType, sec) {
                                var section = '';
                                var questionDiv = '';
                                var form_group = '';
                                for (var i = 0; i < questions[sec].length; i++) {
                                    if (questions[sec][i].type == 'Radio') {
                                        form_group = `<div class="form-group">
                                                    <div class="question-label">
                                                        <label for=${questions[sec][i].for}>${questions[sec][i].question}</label>
                                                    </div>`;
                                        var form_check = '';
                                        for (var j = 0; j < questions[sec][i].options.length; j++) {
                                            form_check = form_check +
                                                `<div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" fill="${questions[sec][i].for}" name="${questions[sec][i].name}" id="" value="${questions[sec][i].options[j]}">
                                                    <label class="form-check-label" for="">
                                                            ${questions[sec][i].options[j]}
                                                    </label>
                                                </div>`

                                        }
                                    } else if (questions[sec][i].type == 'number') {
                                        form_group = `<div class="form-group">
                                        <div class="question-label">
                                            <label for=${questions[sec][i].for}>${questions[sec][i].question}</label>
                                        </div>`;
                                        var form_check = `<div class="form-check form-check-inline">
                                            <input class="form-check-input" type="number" name=${questions[sec][i].name} id="" value="" placeholder="Total Counts">
                                        </div>`;
                                    }
                                    if (questions[sec][i].file) {
                                        var file = `<div class="form-check form-check-inline">
                                            <input type="file" name="${questions[sec][i].for}" class="form-control-file" id="${questions[sec][i].name + 'file'}" onchange="fileSelect()">
                                        </div>`;
                                        form_check = form_check + file;
                                    }
                                    if (questions[sec][i].remarks) {
                                        var remarks = `<div class="form-check form-check-inline">
                                                <textarea class="form-check-input" type="text" id="${questions[sec][i].name}" placeholder="Remarks"></textarea>
                                            </div>`;
                                        form_check = form_check + remarks;
                                    }
                                    form_group = form_group + form_check + '</div>';
                                    section = section + form_group;
                                }
                                document.getElementById(secionType).innerHTML = section;
                                if (id) {
                                    fillData();
                                }
                            }

                            function fillData() {
                                setTimeout(() => {
                                    for (let index = 1; index <= questionaireData.length; index++) {
                                        if (questionaireData[index].answer != 'NA') {
                                            var qn = questionaireData[index].qno;
                                            if ($(`input[fill=${qn}]`) && $(`input[fill=${qn}]`)[0].type == 'radio') {
                                                $(`input[fill=${qn}][value=${questionaireData[index].answer}]`).prop('checked', true);
                                            } else {
                                                $(`input[fill=${qn}]`).val(questionaireData[index].answer);
                                            }
                                        }
                                    }
                                }, 2000);
                                // answer: "NA"
                                // file: "NA"
                                // qno: "Q7"
                                // question: "Was the delivery made on date & time mentioned by you?"
                                // remark: "NA"

                            };
                            var filesObj = {};
                            function fileSelect(id) {
                                console.log(event.target)
                                var file = event.target; // get file from input
                                if (file && file.files[0]) {
                                    var formData = new FormData();
                                    formData.append("file", file.files[0]);
                                    $.ajax({
                                        url: localStorage.getItem('BaseUrl') + 'api/orders/upload',
                                        type: "POST",
                                        crossDoman: true,
                                        data: formData,
                                        contentType: false,
                                        processData: false,
                                        headers: {
                                            "Authorization": localStorage.getItem('token')
                                        },
                                        success: function (response) {
                                            console.log(response);
                                            filesObj[file.name] = response.file;
                                        },
                                        error: function (xhr, status, error) {
                                            console.log(error);
                                        }
                                    })
                                }
                            }
                            function submitForm() {
                                event.preventDefault();
                                var questionnaire = [];
                                var quesTypes = Object.keys(questions);
                                for (var k = 0; k < quesTypes.length; k++) {
                                    for (var l = 0; l < questions[quesTypes[k]].length; l++) {
                                        if (questions[quesTypes[k]][l].type == 'Radio') {
                                            var ans = $(`input[type=radio][name=${questions[quesTypes[k]][l]['name']}]:checked`).val() || 'NA';
                                        } else if (questions[quesTypes[k]][l].type == 'Number') {
                                            var ans = $(`input[type=number][name=${questions[quesTypes[k]][l]['name']}]`).val() || 'NA';
                                        }
                                        if (questions[quesTypes[k]][l].remarks) {
                                            var remarks = $(`textarea[type=text][id=${questions[quesTypes[k]][l]['name']}]`).val() || 'NA';
                                        }
                                        if (questions[quesTypes[k]][l].file) {
                                            var file = filesObj[questions[quesTypes[k]][l]['for']] ? filesObj[questions[quesTypes[k]][l]['for']] : 'NA';
                                        }
                                        questionnaire.push({
                                            qno: questions[quesTypes[k]][l]['for'],
                                            question: questions[quesTypes[k]][l]['question'],
                                            answer: ans,
                                            remark: remarks,
                                            file: file
                                        })
                                    }
                                }
                                if (oldData && id) {
                                    oldData['questionnaire'] = questionnaire;
                                    console.log(oldData)
                                    $.ajax({
                                        url: localStorage.getItem('BaseUrl') + 'api/orders/' + id,
                                        type: "PUT",
                                        crossDoman: true,
                                        data: { data: JSON.stringify(oldData) },
                                        headers: {
                                            "Authorization": localStorage.getItem('token')
                                        },
                                        success: function (response) {
                                            // window.location = "CheckRequest.html";
                                        },
                                        error: function (xhr, status, error) {
                                            console.log(error);
                                        }
                                    })
                                } else {
                                    oldData['questionnaire'] = questionnaire;
                                    console.log(oldData)
                                    $.ajax({
                                        url: localStorage.getItem('BaseUrl') + 'api/orders',
                                        type: "POST",
                                        crossDoman: true,
                                        data: { data: JSON.stringify(oldData) },
                                        headers: {
                                            "Authorization": localStorage.getItem('token')
                                        },
                                        success: function (response) {
                                            // window.location = "CheckRequest.html";
                                        },
                                        error: function (xhr, status, error) {
                                            console.log(error);
                                        }
                                    })
                                }
                            }
                            function ApproveRequest(curr) {

                                $.ajax({
                                    url: localStorage.getItem('BaseUrl') + 'api/orders/' + id + '?action=accepted',
                                    type: "PUT",
                                    crossDoman: true,
                                    headers: { "Authorization": localStorage.getItem('token') },
                                    crossDoman: true,
                                    data: { approved: 'accepted' },
                                    success: function (response) {
                                        window.location = "CheckRequest.html";
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })


                            }
                            function RejectRequest(curr) {
                                var cf = window.confirm('Are you Sure Reject request?');
                                if (!cf) {

                                    return;
                                }
                                $.ajax({
                                    url: localStorage.getItem('BaseUrl') + 'api/orders/' + id + '?action=rejected',
                                    type: "PUT",
                                    crossDoman: true,
                                    headers: { "Authorization": localStorage.getItem('token') },
                                    data: { approved: 'rejected' },
                                    success: function (response) {
                                        window.location = "CheckRequest.html";
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })
                            }
                        </script>


                    </div>
                </div>

            </section>
            <!-- /.content -->


        </div>
        <!-- /.content-wrapper -->

        <!-- <footer class="main-footer">
    <strong>Copyright &copy; 2018 </strong> All rights
    reserved. <a href="//www.hwinfotech.com/">Denave</a>.
  </footer> -->

    </div>
    <!-- ./wrapper -->

    <!-- Vertical form modal -->
    <div id="ajaxModal-html" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">



            </div>
        </div>
    </div>
    <!-- /vertical form modal -->

    <div class="modal-loading-template hidden">

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">Ã—</button>
            <h5 class="modal-title">Loading...</h5>
        </div>

        <div class="modal-body">
            <div class="text-center">
                <h3 class="icon-spinner3 spinner position-left"></h3>
            </div>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
        </div>

    </div>

    <!-- date-range-picker -->
    <script src="./Dashboard _ Questionaire App_files/moment.min.js.download"></script>
    <script src="./Dashboard _ Questionaire App_files/daterangepicker.js.download"></script>

    <!-- bootstrap datepicker -->
    <script src="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.js.download"></script>

    <!-- DataTables -->
    <script src="./Dashboard _ Questionaire App_files/jquery.dataTables.min.js.download"></script>
    <script src="./Dashboard _ Questionaire App_files/dataTables.bootstrap.min.js.download"></script>

    <!-- Validate  -->
    <script src="./Dashboard _ Questionaire App_files/jquery.validate.min.js.download"></script>

    <!-- AdminLTE App -->
    <script src="./Dashboard _ Questionaire App_files/adminlte.min.js.download"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="./Dashboard _ Questionaire App_files/demo.js.download"></script>

    <!-- Select2 -->
    <script src="./Dashboard _ Questionaire App_files/select2.full.min.js.download"></script>

    <!-- pace -->
    <script src="./Dashboard _ Questionaire App_files/pace.min.js.download"></script>

    <!-- iCheck 1.0.1 -->
    <script src="./Dashboard _ Questionaire App_files/icheck.min.js.download"></script>

    <script>
        $(document).ready(function () {
            $('.sidebar-menu').tree()
        })

        $.validator.setDefaults({
            errorElement: "em",
            errorPlacement: function (error, element) {
                // Add the `help-block` class to the error element
                error.addClass("help-block");

                if (element.prop("type") === "checkbox") {
                    error.insertAfter(element.parent("label"));
                } else {
                    error.insertAfter(element);
                }
            },
            highlight: function (element, errorClass, validClass) {
                $(element).parents(".form-group").addClass("has-error").removeClass("has-success");
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).parents(".form-group").addClass("has-success").removeClass("has-error");
            }
        });

        $.fn.openMenu = function () {
            var className = $(this).attr('class');
            if (className == "treeview") {
                $(this).addClass("active");
            } else if (className == "treeview-menu") {
                $(this).addClass("menu-open");
                $(this).css({ display: "block" });
            }
        };

        $.fn.closeMenu = function () {
            var className = $(this).attr('class');
            var count = $(this).length;
            if (count > 1) {
                $.each($(this), function (key, element) {
                    className = $(element).attr('class');
                    if (className == "treeview active") {
                        $(element).removeClass("active");
                    } else if (className == "treeview-menu menu-open") {
                        $(element).removeClass("menu-open");
                        $(element).css({ display: "none" });
                    }
                });
            } else {
                if (className == "treeview active") {
                    $(this).removeClass("active");
                } else if (className == "treeview-menu menu-open") {
                    $(this).removeClass("menu-open");
                    $(this).css({ display: "none" });
                }
            }
        };

        $(".search-menu-box").on('input', function () {
            var filter = $(this).val();
            $(".sidebar-menu > li").each(function () {
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(this).hide();
                } else {
                    $(this).show();
                    $(this).parentsUntil(".treeview").openMenu();
                }
            });
        });

        $('[data-ajax-modal]').on('click', function () {

            event.preventDefault();

            $.ajax({
                url: $(this).attr('href'),
                data: {},
                beforeSend: function () {
                    $('#ajaxModal-html').modal('show');
                    $('#ajaxModal-html').find('.modal-content').html($('.modal-loading-template').html());
                },
                success: function (response) {
                    $('#ajaxModal-html').find('.modal-content').html(response);

                },
                error: function () {
                    alert('Something Went Wrong ! Server Error Occured')
                }
            });

            return false;
        })

    </script>



</body>

</html>