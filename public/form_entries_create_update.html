<!DOCTYPE html>
<html style="height: auto; min-height: 100%;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Dashboard | Questionaire App </title>

    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">



    <!-- Google Font -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/css">

    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/font-awesome.min.css">

    <!-- Ionicons -->
    <link rel="stylesheet" href="./Dashboard _ Questionairegg App_files/ionicons.min.css">

    <!-- DataTables -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/dataTables.bootstrap.min.css">

    <!-- Select2 -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/select2.min.css">

    <!-- daterange picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/daterangepicker.css">

    <!-- bootstrap datepicker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.css">


    <!-- Morris chart -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/morris.css">
    <!-- jvectormap -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/jquery-jvectormap.css">
    <!-- Date Picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/daterangepicker.css">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/bootstrap3-wysihtml5.min.css">

    <!-- Uncomment the below code if you want to use official AdminLte Theme -->
    <!-- Theme style -->
    <!-- <link rel="stylesheet" href="https://retale.co.in/crm/assets//css/AdminLTE.min.css"> -->

    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="../Dashboard _ Questionaire App_files/all.css">

    <!-- Theme style -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/app.css">

    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="./Dashboard _ Questionaire App_files/_all-skins.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

    <!-- jQuery 3 -->
    <script src="./Dashboard _ Questionaire App_files/jquery.min.js.download"></script>


    <!-- jQuery UI 1.11.4 -->
    <script src="./Dashboard _ Questionaire App_files/jquery-ui.min.js.download"></script>

    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>

    <!-- Bootstrap 3.3.7 -->
    <script src="../Dashboard _ Questionaire App_files/bootstrap.min.js.download"></script>

    <!-- SlimScroll -->
    <script src="../Dashboard _ Questionaire App_files/jquery.slimscroll.min.js.download"></script>

    <!-- FastClick -->
    <script src="./Dashboard _ Questionaire App_files/fastclick.js.download"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="./appScripts/Dashboard.js"></script>
    <style>
        .img-avtar {
            border-radius: 50%;
        }
    </style>


</head>

<body class="skin-custom sidebar-mini  pace-done" style="height: auto; min-height: 100%;">
    <div class="pace  pace-inactive">
        <div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
            <div class="pace-progress-inner"></div>
        </div>
        <div class="pace-activity"></div>
    </div>
    <!-- Site wrapper -->
    <div class="wrapper" style="height: auto; min-height: 100%;">

        <header class="main-header">
            <!-- Logo -->
            <a href="#" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini">
                    <img src="./Dashboard _ Questionaire App_files/denave_logo.jpg" width="50">
                </span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg">
                    <img src="./Dashboard _ Questionaire App_files/denave_logo.jpg" width="150">
                </span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="index.html" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- Messages: style can be found in dropdown.less-->
                        <!-- User Account: style can be found in dropdown.less -->
                        <li class="dropdown user user-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="./Dashboard _ Questionaire App_files/3.png" class="user-image" alt="User Image">
                                <span class="hidden-xs user_role">deo</span>
                            </a>
                            <ul class="dropdown-menu">
                                <!-- User image -->
                                <li class="user-header">
                                    <img src="./Dashboard _ Questionaire App_files/3.png" class="img-circle" alt="User Image">

                                    <p>
                                        <span class="hidden-xs user_role">deo</span>
                                        <small>Member since July. 2018</small>
                                    </p>
                                </li>
                                <!-- Menu Footer-->
                                <li class="user-footer">
                                    <div class="pull-right">
                                        <a href="index.html" class="btn btn-default btn-flat">Sign out</a>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <!-- Control Sidebar Toggle Button -->
                    </ul>
                </div>
            </nav>
        </header>

        <!-- =============================================== -->

        <!-- Left side column. contains the sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar" style="height: auto;">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="./Dashboard _ Questionaire App_files/3.png" class="img-circle" alt="User Image" style="height:  45px !important;">
                    </div>
                    <div class="pull-left info">
                        <span class="hidden-xs user_role">deo</span>
                        <a href="https://retale.co.in/crm/operator/dashboard#">
                            <i class="fa fa-circle text-success"></i> Online</a>
                    </div>
                </div>

                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu tree" data-widget="tree">

                    <li class="header">Main Navigation</li>

                    <li>
                        <a href="#">
                            <i class="fa fa-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>

                    <li class="active">
                        <a href="./CheckRequest.html">
                            <i class="fa fa-list-ul"></i>
                            <span>Form Entries</span>
                        </a>
                    </li>

                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>

        <!-- =============================================== -->

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper" style="min-height: 629px;">


            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    Form Summary
                </h1>
            </section>

            <!-- Main content -->
            <section class="content">

                <div class="row">
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-aqua">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Total Filled</span>
                                <span class="info-box-number total_filled">0</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-green">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Validated</span>
                                <span class="info-box-number total_validated">15</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-red">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Rejected</span>
                                <span class="info-box-number total_rejected">0</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box">
                            <span class="info-box-icon bg-red">
                                <i class="fa fa-file-text-o"></i>
                            </span>

                            <div class="info-box-content">
                                <span class="info-box-text">Pending</span>
                                <span class="info-box-number total_pending">13</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.col -->

                <div class="box">
                    <div class="box-header theme-bg text-center">
                        <h3 class="box-title">Mystery Audit Program</h3>
                    </div>
                    <div class="box-body">

                        <form name="entriesForm" id="entriesForm">

                            <div class="row">


                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Platform </label>
                                        <br>
                                        <select name="platform" id="platform" class="form-control select2 select2-hidden-accessible" style="width: 100%;" required=""
                                            onchange="getSuppliers(this.value)" tabindex="-1" aria-hidden="true">

                                        </select>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Supplier/Distributor Name</label>

                                        <input id="supplier" class="form-control" required="" />



                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Date</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input id="dashboarddate" type="text" name="date" readonly="" value="" class="form-control datepicker" required="">
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Order ID</label>
                                        <input id="order_id" type="text" name="order_id" class="form-control" required="" placeholder="" value="">
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Mystery Shopper Name</label>
                                        <input id="txtshopper" type="text" name="shopper" class="form-control" required="" placeholder="" value="">
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Product Category </label>
                                        <br>
                                        <select name="product_category" id="product_category" class="form-control select2 select2-hidden-accessible" style="width: 100%;"
                                            required="" tabindex="-1" aria-hidden="true">
                                            <option value="">Select Product Category</option>
                                            <option value="Premium Category">Premium Category</option>
                                            <option value="Gifting">Gifting</option>
                                            <option value="Bal Choc">Bal Choc</option>
                                            <option value="CJD">CJD</option>
                                            <option value="D2C Customised">D2C Customised</option>
                                            <option value="D2C Personalised">D2C Personalised</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                            <div class="row">

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Zone</label>
                                        <br>
                                        <select name="zone" id="zone" class="form-control select2 select2-hidden-accessible" style="width: 100%;" required="" onchange="getCities(this.value)"
                                            tabindex="-1" aria-hidden="true">
                                            <option value="">Select your Zone</option>
                                            <option value="East">East</option>
                                            <option value="West">West</option>
                                            <option value="North">North</option>
                                            <option value="South">South</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">City</label>
                                        <br>
                                        <div id="cityList">
                                            <select id="selectcity" name="city" id="city" class="form-control select2 select2-hidden-accessible" required="" style="width: 100%;"
                                                tabindex="-1" aria-hidden="true">
                                                <option value="">Select your City</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">MFD/BBD </label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input id="mfd" type="text" name="mfd" readonly="" value="" class="form-control datepicker" required="">
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Order Date</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input id="order_date" type="text" name="order_date" readonly="" value="" class="form-control datepicker" required="">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Dispatch Date</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input id="txtdispatch_date" type="text" name="dispatch_date" readonly="" value="" class="form-control datepicker" required="">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Delivery Date</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input id="txtdelivery_date" type="text" name="delivery_date" readonly="" value="" class="form-control datepicker" required="">
                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="row">

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Type of Product</label>
                                        <br>
                                        <select id="selectproduct_type" name="product_type" id="product_type" class="form-control select2 select2-hidden-accessible"
                                            style="width: 100%;" required="" tabindex="-1" aria-hidden="true">
                                            <option value="">Select Type of Product</option>
                                            <option value="Premium Chocolate">Premium Chocolate</option>
                                            <option value="Gifting Chocolate">Gifting Chocolate</option>
                                            <option value="egular Chocolate">Regular Chocolate</option>
                                            <option value="Cadbury Joy Delivery">Cadbury Joy Delivery</option>
                                            <option value="2C Customised">D2C Customised</option>
                                            <option value="D2C Personalised">D2C Personalised</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Product Name </label>
                                        <br>
                                        <select name="product_name" id="product_name" class="form-control select2 select2-hidden-accessible" style="width: 100%;"
                                            required="" tabindex="-1" aria-hidden="true">
                                            <option value="">Select Product</option>
                                            <option value="Silk">Silk</option>
                                            <option value="Bournville">Bournville</option>
                                            <option value="Celebration">Celebration</option>
                                            <option value="Glow">Glow</option>
                                            <option value="Silk Mini's">Silk Mini's</option>
                                            <option value="RDFC">RDFC</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label for="formInput-1" class="control-label">Batch Code </label>
                                        <input id="txtbatchcode" type="text" name="batch_code" class="form-control" required="" placeholder="" value="">
                                    </div>
                                </div>

                            </div>

                            <!-- <input type="hidden" name="redirect" value="operator/dashboard/index"> -->



                            <div class="form-group">

                                <div class="pull-right">
                                    <button type="submit" class="btn btn-info btn-flat edit_btn">Save &amp; Continue</button>
                                </div>

                            </div>

                        </form>
                        <script>
                            function getStats() {
                                var url = localStorage.getItem('BaseUrl') + 'api/orders/stats';
                                console.log(url);
                                $.ajax({
                                    url: url,
                                    type: "GET",
                                    crossDoman: true,
                                    headers: { "Authorization": localStorage.getItem('token') },
                                    success: function (response) {
                                        $('.total_filled').text(response.total);
                                        $('.total_validated').text(response.accepted);
                                        $('.total_rejected').text(response.rejected);
                                        $('.total_pending').text(response.pending);
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })
                            }
                            getStats();
                            var user = JSON.parse(localStorage.getItem('deved_user'));
                            $('.user_role').text(user.role);
                            var searchParams = new URLSearchParams(window.location.search);
                            var id = searchParams.get('id');
                            // if (searchParams.get('edit') && searchParams.get('edit') == 'false') {
                            //     $('.edit_btn').toggle();
                            // }
                            if (id) {
                                $.ajax({
                                    url: localStorage.getItem('BaseUrl') + 'api/orders/' + id,
                                    type: "GET",
                                    crossDoman: true,
                                    headers: {
                                        "Authorization": localStorage.getItem('token')
                                    },
                                    success: function (response) {
                                        console.log(response)
                                        getCities(response.zone, response);
                                    },
                                    error: function (xhr, status, error) {
                                        console.log(error);
                                    }
                                })
                            }
                            var citiesData = [];
                            var zoneLast = [];
                            function getCities(zone, data) {
                                if (citiesData.length && zoneLast == zone) {
                                    createOptionscity(citiesData, data);
                                } else {
                                    zoneLast = zone;
                                    $.ajax({
                                        url: localStorage.getItem('BaseUrl') + 'api/utils/zones/' + zone,


                                        success: function (response) {
                                            citiesData = response;
                                            createOptionscity(response, data);
                                            //	$('#supplierSelectWrapper').html(response).find('select').select2();
                                        },
                                        error: function (error) {
                                            console.log(" Error Occured: \n");
                                            console.log(error);
                                        }
                                    })
                                }

                            }

                            function setValues(response) {
                                $(`#platform`).val(response.platform).change();
                                $(`#supplier`).val(response.supplier);
                                // $(`#dashboarddate`).val(new Date(response.date));
                                $(`#order_id`).val(response.orderId);
                                $(`#txtshopper`).val(response.shopperName);
                                $(`#selectcity`).val(response.city).change();
                                $(`#zone`).val(response.zone).change();
                                // $(`#order_date`).val(response.orderDate.substring(0, 10));
                                // $(`#txtdispatch_date`).val(response.dispatchDate.substring(0, 10));
                                // $(`#txtdelivery_date`).val(response.deliveryDate.substring(0, 10));
                                $(`#selectproduct_type`).val(response.productType).change();
                                $(`#product_name`).val(response.productName).change();
                                $(`#product_category`).val(response.productCategory).change();
                                $(`#txtbatchcode`).val(response.batchCode);
                                // $(`#mfd`).val(response.mafDate.substring(0, 10));

                                $('#dashboarddate').datepicker("setDate", new Date(response.date));
                                $('#order_date').datepicker("setDate", new Date(response.orderDate));
                                $('#txtdispatch_date').datepicker("setDate", new Date(response.dispatchDate));
                                $('#txtdelivery_date').datepicker("setDate", new Date(response.deliveryDate));
                                $('#mfd').datepicker("setDate", new Date(response.mafDate));
                                $('.datepicker').datepicker({ format: 'dd MM, yyyy' });
                                if (searchParams.get('edit') && searchParams.get('edit') == 'false') {
                                    $(".form-control").attr('disabled', 'true');
                                }
                            }


                            // $(document).ready(function () {

                            //     // $('[name=order_date]').on('changeDate', function (date) {
                            //     //     $("[name=dispatch_date]").datepicker("setDate", $(this).val());
                            //     // })

                            //     // $('[name=dispatch_date]').on('changeDate', function (date) {
                            //     //     $("[name=delivery_date]").datepicker("setDate", $(this).val());
                            //     // })

                            //     // $('[name=order_date]').on('changeDate', function (date) {
                            //     //     $("[name=mfd]").datepicker("setDate", $(this).val());
                            //     // })

                            // })

                            function getSuppliers(val) {
                                var curr = platformobject.filter(x => x.name == val);
                                $('#supplier').val(curr[0].sellers[0]);
                            }

                            function alphaOnly(event) {
                                var key = event.keyCode;
                                return ((key >= 65 && key <= 90) || key == 8);
                            };
                            function getplatforms() {
                                $.ajax({
                                    url: localStorage.getItem('BaseUrl') + 'api/utils/platforms',
                                    success: function (response) {
                                        createOptions(response);
                                        platformobject = response;
                                        //	$('#supplierSelectWrapper').html(response).find('select').select2();
                                    },
                                    error: function (error) {
                                        console.log(" Error Occured: \n");
                                        console.log(error);
                                    }
                                })

                            }

                            platformobject = {};
                            getplatforms();

                            function createOptionscity(obj, data) {
                                // $('#selectcity').empty();
                                $("#selectcity option").remove();
                                var op = document.createElement('option');
                                op.value = "Select your city";
                                op.text = "Select your city";
                                $('#selectcity')[0].appendChild(op);
                                for (var i = 0; i < obj.length; i++) {
                                    var op = document.createElement('option');
                                    op.value = obj[i].name;
                                    op.text = obj[i].name;
                                    op.setAttribute('townclass', obj[i].townClass);
                                    $('#selectcity')[0].appendChild(op);
                                }

                                if (data) {
                                    setValues(data);
                                    $('#selectcity').val(data.city).change();
                                } else {
                                    // $('#selectcity').empty();
                                }
                            }
                            function createOptions(obj) {
                                $('#platform').empty();
                                var op = document.createElement('option');
                                op.value = "";
                                op.text = "Select PlatForms";
                                $('#platform')[0].appendChild(op);
                                for (var i = 0; i < obj.length; i++) {
                                    var op = document.createElement('option');
                                    op.value = obj[i].name;
                                    op.text = obj[i].name;
                                    $('#platform')[0].appendChild(op);
                                }

                            }

                            var submit = false;

                            document.getElementById('entriesForm').onsubmit = function () {
                                submit = true;
                                openQuestions();
                                return false;
                            }

                            function openQuestions() {
                                var data = {
                                    platform: $(`#platform`).val() || 'NA',
                                    supplier: $(`#supplier`).val() || 'NA',
                                    date: $(`#dashboarddate`).val() ? new Date($(`#dashboarddate`).val()) : 'NA',
                                    orderId: $(`#order_id`).val() || 'NA',
                                    shopperName: $(`#txtshopper`).val() || 'NA',
                                    city: $(`#selectcity`).val() || 'NA',
                                    zone: $(`#zone`).val() || 'NA',
                                    orderDate: $(`#order_date`).val() ? new Date($(`#order_date`).val()) : 'NA',
                                    dispatchDate: $(`#txtdispatch_date`).val() ? new Date($(`#txtdispatch_date`).val()) : 'NA',
                                    deliveryDate: $(`#txtdelivery_date`).val() ? new Date($(`#txtdelivery_date`).val()) : 'NA',
                                    productType: $(`#selectproduct_type`).val() || 'NA',
                                    productName: $(`#product_name`).val() || 'NA',
                                    productCategory: $(`#product_category`).val() || 'NA',
                                    batchCode: $(`#txtbatchcode`).val() || 'NA',
                                    mafDate: $(`#mfd`).val() ? new Date($(`#mfd`).val()) : 'NA',
                                }
                                var str = "";
                                for (var key in data) {
                                    if (str != "") {
                                        str += "&";
                                    }
                                    str += key + "=" + encodeURIComponent(data[key]);
                                }
                                localStorage.setItem('formData', JSON.stringify(data));
                                if (!searchParams.get('edit')) {
                                    window.location = "form_entries_create_update_question.html";
                                } else {
                                    window.location = `form_entries_create_update_question.html?edit=${searchParams.get('edit')}&id=` + id;
                                }
                                // $('#entriesForm').toggle();
                                event.preventDefault();
                            }

                            localStorage.removeItem('formData');
                        </script>


                        <script>

                            $(document).ready(function () {
                                var todayDate = new Date();
                                $('.datepicker').datepicker({
                                    format: 'dd MM, yyyy',
                                    autoclose: true
                                });
                                $(".datepicker").datepicker("setDate", todayDate);
                                //Flat red color scheme for iCheck
                                $('.icheck-checkbox, .icheck-radio').iCheck({
                                    checkboxClass: 'icheckbox_flat-green',
                                    radioClass: 'iradio_flat-green'
                                })

                                $('.select2').select2()

                            })

                        </script>


                    </div>
                </div>

            </section>
            <!-- /.content -->


        </div>
        <!-- /.content-wrapper -->

        <!-- <footer class="main-footer">
    <strong>Copyright &copy; 2018 </strong> All rights
    reserved. <a href="//www.hwinfotech.com/">Denave</a>.
  </footer> -->

    </div>
    <!-- ./wrapper -->

    <!-- Vertical form modal -->
    <div id="ajaxModal-html" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">



            </div>
        </div>
    </div>
    <!-- /vertical form modal -->

    <div class="modal-loading-template hidden">

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">Ã—</button>
            <h5 class="modal-title">Loading...</h5>
        </div>

        <div class="modal-body">
            <div class="text-center">
                <h3 class="icon-spinner3 spinner position-left"></h3>
            </div>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
        </div>

    </div>

    <!-- date-range-picker -->
    <script src="./Dashboard _ Questionaire App_files/moment.min.js.download"></script>
    <script src="./Dashboard _ Questionaire App_files/daterangepicker.js.download"></script>

    <!-- bootstrap datepicker -->
    <script src="./Dashboard _ Questionaire App_files/bootstrap-datepicker.min.js.download"></script>

    <!-- DataTables -->
    <script src="./Dashboard _ Questionaire App_files/jquery.dataTables.min.js.download"></script>
    <script src="./Dashboard _ Questionaire App_files/dataTables.bootstrap.min.js.download"></script>

    <!-- Validate  -->
    <script src="./Dashboard _ Questionaire App_files/jquery.validate.min.js.download"></script>

    <!-- AdminLTE App -->
    <script src="./Dashboard _ Questionaire App_files/adminlte.min.js.download"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="./Dashboard _ Questionaire App_files/demo.js.download"></script>

    <!-- Select2 -->
    <script src="./Dashboard _ Questionaire App_files/select2.full.min.js.download"></script>

    <!-- pace -->
    <script src="./Dashboard _ Questionaire App_files/pace.min.js.download"></script>

    <!-- iCheck 1.0.1 -->
    <script src="./Dashboard _ Questionaire App_files/icheck.min.js.download"></script>

    <script>
        $(document).ready(function () {
            $('.sidebar-menu').tree()
        })

        $.validator.setDefaults({
            errorElement: "em",
            errorPlacement: function (error, element) {
                // Add the `help-block` class to the error element
                error.addClass("help-block");

                if (element.prop("type") === "checkbox") {
                    error.insertAfter(element.parent("label"));
                } else {
                    error.insertAfter(element);
                }
            },
            highlight: function (element, errorClass, validClass) {
                $(element).parents(".form-group").addClass("has-error").removeClass("has-success");
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).parents(".form-group").addClass("has-success").removeClass("has-error");
            }
        });

        $.fn.openMenu = function () {
            var className = $(this).attr('class');
            if (className == "treeview") {
                $(this).addClass("active");
            } else if (className == "treeview-menu") {
                $(this).addClass("menu-open");
                $(this).css({ display: "block" });
            }
        };

        $.fn.closeMenu = function () {
            var className = $(this).attr('class');
            var count = $(this).length;
            if (count > 1) {
                $.each($(this), function (key, element) {
                    className = $(element).attr('class');
                    if (className == "treeview active") {
                        $(element).removeClass("active");
                    } else if (className == "treeview-menu menu-open") {
                        $(element).removeClass("menu-open");
                        $(element).css({ display: "none" });
                    }
                });
            } else {
                if (className == "treeview active") {
                    $(this).removeClass("active");
                } else if (className == "treeview-menu menu-open") {
                    $(this).removeClass("menu-open");
                    $(this).css({ display: "none" });
                }
            }
        };

        $(".search-menu-box").on('input', function () {
            var filter = $(this).val();
            $(".sidebar-menu > li").each(function () {
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(this).hide();
                } else {
                    $(this).show();
                    $(this).parentsUntil(".treeview").openMenu();
                }
            });
        });

        $('[data-ajax-modal]').on('click', function () {

            event.preventDefault();

            $.ajax({
                url: $(this).attr('href'),
                data: {},
                beforeSend: function () {
                    $('#ajaxModal-html').modal('show');
                    $('#ajaxModal-html').find('.modal-content').html($('.modal-loading-template').html());
                },
                success: function (response) {
                    $('#ajaxModal-html').find('.modal-content').html(response);

                },
                error: function () {
                    alert('Something Went Wrong ! Server Error Occured')
                }
            });

            return false;
        })

    </script>



</body>

</html>